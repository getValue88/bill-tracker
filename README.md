# Bill Tracker

A cross-platform personal finance helper built with **Next.js 14**, **Prisma** and **Electron**.  Keep track of every bill, note and attachment in one place â€” in the browser or as a native desktop app.

---

## âœ¨ Feature Highlights

### Bills
* Inline-editable amount and paid/unpaid toggle
* Due-date, created-date & automatic monthly totals
* Recurring bills (monthly / quarterly / yearly) generated by a scheduler
* Optional payment link â€“ name becomes a hyperlink that opens in a new tab
* File attachments per bill (receipts, PDFs)
* Search by text, filter by month & status, sub-navigation with live totals

### Notes
* Rich-text notes that can be attached to anything or stand alone
* Resolve / undo resolve, archive / unarchive
* Drag-and-drop ordering powered by **@hello-pangea/dnd**
* Sticky (pinned) notes sit at the top

### Reports
* Monthly expenditure bar chart
* Current-month summary (total vs paid)

### Quality-of-life
* Dark-mode friendly UI with Tailwind + Headless UI
* Keyboard-navigable components & accessible modals
* JSON logging via **pino**

### Tech
* Next.js App Router + Server Actions
* Prisma ORM with SQLite (dev/offline) & PostgreSQL ready for production
* Electron wrapper â€“ runs the same build in a native window
* TypeScript everywhere

---

## ğŸ”§ Getting Started (Browser)

```bash
# 1. Clone & install (runs `postinstall` which executes `prisma generate` automatically)
git clone https://github.com/<your>/bill-tracker.git
cd bill-tracker
npm install  # generates Prisma client

# 2. Database â€“ create & apply migrations
npx prisma migrate dev --name init

# 3. Seed recurring demo data (optional)
npm run test-recurring

# 4. Run the dev server
npm run dev
# â†’ http://localhost:3000
```

Environment variables live in `.env` (create one from `.env.example` if needed).

---

## ğŸ–¥ï¸ Running as a Desktop App (Electron)

The repository already contains an Electron main process under `electron/`.

### Development mode

```bash
# Hot-reload Next.js + Electron in one go
npm run electron:dev
```

### Production build / installer

```bash
# 1. Build the Next.js app
npm run build

# 2. Package for your OS (DMG/EXE/AppImage, etc.)
# If you are on Windows and the build fails with a symbolic-link or
# `EPERM` error, reopen PowerShell **as Administrator** (or enable
# "Developer Mode" in Windows settings) and run:
#   npm run electron:build
#
# After a successful build the installer is written to the `dist/` folder.
#   â€¢ Windows:  `dist/ Bill Tracker Setup <version>.exe`
#   â€¢ macOS   :  `dist/ *.dmg`
#   â€¢ Linux   :  `dist/ *.AppImage`, `.deb`, etc. depending on targets
npm run electron:build
```

Under the hood this uses **electron-builder** so macOS, Windows and Linux targets are supported.

---

## ğŸ“‚ Project Structure (abridged)

```txt
src/
 â”œâ”€ app/              # Pages, API routes, React Server Components
 â”‚   â”œâ”€ api/          # REST endpoints (bills, notes)
 â”‚   â”œâ”€ bills/        # /bills pages & components
 â”‚   â”œâ”€ notes/        # /notes pages & components
 â”‚   â””â”€ reports/      # /reports overview
 â”œâ”€ components/       # Reusable UI bits (EditableAmount, PayStatusButtonsâ€¦)
 â””â”€ lib/              # Prisma client, logger, recurring scheduler
prisma/
 â””â”€ schema.prisma     # Database schema
electron/
 â”œâ”€ main.js           # Electron main process â€“ spawns Next.js
 â””â”€ preload.js        # Context-isolated bridge for renderer
```

---

## ğŸ›  Scripts

| Command | Purpose |
|---------|---------|
| `npm run dev` | Start Next.js in development mode |
| `npm run build` | Create an optimised production build |
| `npm run start` | Launch the built app on port 3000 |
| `npm run electron:dev` | Start Electron in development (wraps `npm run dev`) |
| `npm run electron:build` | Package desktop installers via electron-builder |
| `npm run test-recurring` | Execute the recurring bill scheduler (demo) |

---

## ğŸ—„ï¸ Database Models (Prisma)

### Bill
| Field | Type | Notes |
|-------|------|-------|
| id | Int | Primary key |
| name | String | Bill name |
| amount | Float | Monetary value |
| dueDate | DateTime? | Optional due date |
| isPaid | Boolean | Paid flag |
| paymentLink | String? | URL opened when name is clicked |
| isRecurrent | Boolean | Generated by scheduler |
| fixedAmount | Boolean | Recurrent amount mutable flag |
| notes | String? | Free-form notes |
| attachmentPath | String? | File pointer |
| createdAt / updatedAt | DateTime | Auto-managed |

### Note
| Field | Type | Notes |
|-------|------|-------|
| id | Int | Primary key |
| title | String | Note title |
| content | String? | Markdown / text |
| resolved | Boolean | âœ… if done |
| active | Boolean | Archived flag |
| order | Int | Manual ordering |
| sticky | Boolean | Pinned flag |
| createdAt / updatedAt | DateTime | Auto |

---

## ğŸ›¡ Auth & Cloud (roadmap)
* Next-Auth with GitHub/Google providers
* Managed Postgres (Vercel Postgres / Supabase) for multi-device sync
* Web-push reminders & real-time updates via SSE

Feel free to open issues or PRs for bugs, ideas or discussion. 